{% extends "base_auth.html" %}
{% load i18n %}

{% block title %}{% trans "Reset Password – Step 2" %}{% endblock %}
{% block body_class %}reset-step2-page{% endblock %}
{% block left_title %}{% trans "Reset Password" %}{% endblock %}

{% block extra_css %}
<style>
  /* Background for Reset Step 2 page */
  body.reset-step2-page .left{
    background:
      url("/static/meta_search/images/reset-step2.png") center/cover no-repeat,
      linear-gradient(160deg, #173B88 0%, #0b4da3 100%);
    background-color:#0b4da3;
  }
</style>
{% endblock %}

{% block intro %}
  <p class="intro">{% trans "Enter the code sent to your phone, then choose a new password." %}</p>
{% endblock %}

{% block form_attrs %}{% endblock %}

{% block form_errors %}
  {% if messages %}
    <ul class="errorlist">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  {% if form.non_field_errors %}
    <ul class="errorlist">
      {% for e in form.non_field_errors %}<li>{{ e }}</li>{% endfor %}
    </ul>
  {% endif %}
{% endblock %}

{% block form_fields %}
  {# OTP #}
  <label for="{{ form.otp.id_for_label }}">{% trans "Verification Code" %}</label>
  {{ form.otp }}
  {% if form.otp.errors %}
    <ul class="errorlist">
      {% for e in form.otp.errors %}<li>{{ e }}</li>{% endfor %}
    </ul>
  {% endif %}

  {# New Password #}
  <label for="{{ form.new_password1.id_for_label }}">{% trans "New Password" %}</label>
  <div class="field has-left-ic">
    <svg class="left-ic" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="currentColor" d="M12 1a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-1V6a5 5 0 0 0-5-5zm-3 8V6a3 3 0 1 1 6 0v3H9z"/>
    </svg>
    {{ form.new_password1 }}
    <button type="button"
            class="eye-btn"
            data-target="{{ form.new_password1.id_for_label }}"
            aria-label="{% trans 'Show/Hide password' %}"></button>
  </div>

  {# Confirm Password #}
  <label for="{{ form.new_password2.id_for_label }}">{% trans "Confirm Password" %}</label>
  <div class="field has-left-ic">
    <svg class="left-ic" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="currentColor" d="M12 1a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-1V6a5 5 0 0 0-5-5zm-3 8V6a3 3 0 1 1 6 0v3H9z"/>
    </svg>
    {{ form.new_password2 }}
    <button type="button"
            class="eye-btn"
            data-target="{{ form.new_password2.id_for_label }}"
            aria-label="{% trans 'Show/Hide password' %}"></button>
  </div>
{% endblock %}

{% block form_actions %}
  <button type="submit" class="btn-primary">{% trans "Reset Password" %}</button>
{% endblock %}

{% block below_form %}
  <p class="login-link" style="margin-top:12px;">
    <a href="{% url 'password_reset_start' %}">{% trans "Back" %}</a>
    &nbsp;•&nbsp;
    <a href="/">{% trans "Home" %}</a>
  </p>
{% endblock %}
