{% extends "base_auth.html" %}
{% load i18n %}

{% block title %}{% trans "Sign In - Expedia" %}{% endblock %}
{% block body_class %}signin-page{% endblock %}
{% block left_title %}{% trans "Sign In" %}{% endblock %}

{% block extra_css %}
<style>
  /* Signin-specific background with gradient fallback under the image */
  body.signin-page .left{
    background:
      url("/static/meta_search/images/signinimg.png") center/cover no-repeat,
      linear-gradient(160deg, #173B88 0%, #0b4da3 100%);
    background-color:#0b4da3; /* solid fallback */
  }
</style>
{% endblock %}

{% block intro %}
  <p class="intro">{% trans "Welcome back, please sign in" %}</p>
{% endblock %}

{% block form_attrs %}action="{% url 'signin' %}"{% endblock %}

{% block form_errors %}
  {% if messages %}
    <ul class="errorlist" style="margin-bottom:12px;">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  {% if form.non_field_errors %}
    <ul class="errorlist">
      {% for err in form.non_field_errors %}<li>{{ err }}</li>{% endfor %}
    </ul>
  {% endif %}
{% endblock %}

{% block form_fields %}
  <input type="hidden" name="next" value="{{ next }}">

  {# PHONE #}
  <label for="{{ form.phone_number.id_for_label }}">{% trans "Phone" %}</label>
  {{ form.phone_number.errors }}
  <div class="phone_number_field">
    {{ form.country_code }}
    {{ form.phone_number }}
  </div>
  {% if form.country_code.errors %}
    <ul class="errorlist">
      {% for err in form.country_code.errors %}<li>{{ err }}</li>{% endfor %}
    </ul>
  {% endif %}

  {# PASSWORD #}
  <label for="{{ form.password.id_for_label }}">{% trans "Password" %}</label>
  {{ form.password.errors }}
  <div class="field has-left-ic">
    <svg class="left-ic" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="currentColor" d="M12 1a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-1V6a5 5 0 0 0-5-5zm-3 8V6a3 3 0 1 1 6 0v3H9z"/>
    </svg>
    {{ form.password }}
    <button type="button"
            class="eye-btn"
            data-target="{{ form.password.id_for_label }}"
            aria-label="{% trans 'Show/Hide password' %}"></button>
  </div>

  {# CAPTCHA (optional) #}
  {% if form.captcha %}
    <label for="{{ form.captcha.id_for_label }}">{% trans "Captcha" %}</label>
    {{ form.captcha.errors }}
    <div class="captcha-field no-divider">
      {{ form.captcha }}
    </div>
  {% endif %}
{% endblock %}

{% block form_actions %}
  <button type="submit" class="btn-primary">{% trans "Sign In" %}</button>
{% endblock %}

{% block below_form %}
  <p class="login-link" style="margin-top:12px;">
    {% trans "Don’t have an account?" %} <a href="{% url 'signup' %}">{% trans "Create one" %}</a>
    &nbsp;•&nbsp;
    <a href="{% url 'password_reset_start' %}">{% trans "Forgotten password?" %}</a>
  </p>
{% endblock %}
