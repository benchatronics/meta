{% extends "base_admin.html" %}
{% block title %}Admin Â· Task Templates{% endblock %}
{% block page_title %}Task Templates{% endblock %}

{% block content %}
<form method="get" class="card" style="padding:12px; display:grid; gap:8px; margin-bottom:12px;">
  <label>Search <input type="text" name="q" value="{{ q }}" placeholder="hotel/city/country/task_id"></label>
  <label>Status <input type="text" name="status" value="{{ status }}" placeholder="(optional)"></label>
  <button class="btn primary" type="submit">Filter</button>
</form>

<div class="card" style="padding:0;">
  <div class="table-responsive" style="overflow-x:auto;">
    <table style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th style="text-align:left; padding:10px;">#</th>
          <th style="text-align:left; padding:10px;">Task ID</th>
          <th style="text-align:left; padding:10px;">Hotel</th>
          <th style="text-align:left; padding:10px;">Location</th>
          <th style="text-align:left; padding:10px;">Status</th>
          <th style="text-align:left; padding:10px;">Updated</th>
          <th style="text-align:left; padding:10px;">Set Status</th>
        </tr>
      </thead>
      <tbody>
        {% for t in page_obj %}
          <tr>
            <td style="padding:10px;">{{ t.id }}</td>
            <td style="padding:10px;">{{ t.task_id }}</td>
            <td style="padding:10px;">{{ t.hotel_name }}</td>
            <td style="padding:10px;">{{ t.city }}, {{ t.country }}</td>
            <td style="padding:10px;">{{ t.status }}</td>
            <td style="padding:10px;">{{ t.updated_at }}</td>
            <td style="padding:10px;">
              <form method="post" action="{% url 'bo_template_toggle_status' t.id %}" style="display:flex; gap:6px;">{% csrf_token %}
                <input type="text" name="status" placeholder="NEW STATUS">
                <button class="btn">Apply</button>
              </form>
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="7" style="padding:12px;">No templates.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% include "meta_search/bo/_pagination.html" with page_obj=page_obj %}
{% endblock %}
